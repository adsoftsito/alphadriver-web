<ng-template #modalSendInvitation let-c="close" let-d="dismiss">
    <div class="modal-header">
      <div class="motum-modal-icon">
        <i class="motum-i tm-e91a changeofpropertiesmessage"></i>
      </div>
      <h5 class="modal-title">{{ header | translate }}</h5>
      <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      
      <p>{{ content | translate }} ejemplo@bwl.com {{ contents | translate }}</p>
    </div>
    <div class="modal-footer longbutton">
      <button type="button" class="btn motum-btn-confirm button-long " (click)="c(true)">{{ accept | translate }}</button>
    </div>
</ng-template>
<ng-template #modalPassword let-c="close" let-d="dismiss">
  <div class="modal-header">
    <div class="motum-modal-icon">
      <i class="motum-i tm-mu tm-mensajes changeofpropertiesmessage"></i>
    </div>
    <h5 class="modal-title"> {{'pages.confirmationwindowClient.header' | translate }} </h5>
    <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <p>{{ 'pages.confirmationwindowClient.content' | translate}} {{clientModel.account.email}} {{ 'pages.confirmationwindowClient.contents' | translate}}</p>
  </div>
  <div class="modal-footer window-center-align">
    <button type="button" class="btn motum-btn-confirm button-long " (click)="c(true)">{{ 'pages.confirmationwindowClient.sendbutton' | translate}}</button>
  </div>
</ng-template>

<div #backdrop class="any">
  <div class="formClient">
  <div [@slideHiddenShow] = 'windowState' #window class="window-edit">
    <div class="window-lt">
      <div class="window-header">
        <div class="row" *ngIf="editar">
          <div >
            <div class="avatar {{setColorAvatar}}">{{initials}}</div>
          </div>
          <div >
            <div class="nameUser">{{clientModel.commercialName}}</div>
            <div class="rolUser">{{clientModel.businessName}}</div>
          </div>
        </div>
        <div class="row" *ngIf="!editar">
          <div >
            <div class="avatarNew"><i class="motum-i tm-e932 userIcon "></i></div>
          </div>
          <div >
            <div class="nameUserNew">{{ title | translate }}</div>
          </div>
        </div>
      </div>
      <ngb-tabset #t="ngbTabset" [justify]="'end'"  >

          <ngb-tab id="tabCliente" title="{{ viaje | translate }}">

              <ng-template ngbTabContent>
                <div class="window-body">
                  <div class="section-head">
                    <p class="section-title motum-title-form" *ngIf="editar">{{ editClientTrans | translate }}</p>
                    <p class="section-title motum-title-form" *ngIf="!editar">{{ createClientTrans | translate }}</p>
                    <hr class="window-section-space motum-hr-head-form">
                  </div>
    
    
                  <div class="section-body">

                    <!--
                      <h1>{{ agmtitle }}</h1>

                              <agm-map #map [latitude]="lat" [longitude]="lng">
                                <agm-marker [latitude]="lat" [longitude]="lng"></agm-marker>
                              </agm-map>
                    -->
                    
                    <form (ngSubmit)="createClient()"  class="ng-untouched ng-pristine ng-valid">
                      <div class="row window-body-margin">
                        <div class="col-md-6 col-sm-12 motum-content-left-form">
                            <label class="window-bold-style motum-subtitle-form in-form">{{ companyInformation | translate }}</label>
                          <div class="row motum-label-form">
                            <div class="col-md-12 spaceTitle">
                              <label for="inputComercialName">{{ begin | translate }}  </label>
                            </div>
                            <div class=" col-md-12 col-sm-12">
                              <div class="form-group has-success motum-input-form">
                                <input [(ngModel)]="beginData" type="date" class="form-control input-sm" id="inputComercialName" [ngModelOptions]="{standalone: true}" required>
                                
                              </div>
                            </div>
                          </div>
                          <div class="row motum-label-form">
                            <div class="col-md-12">
                              <label for="inputBusinessName">{{ end | translate }}</label>
                            </div>
                            <div class=" col-md-12 col-sm-12">
                              <div class="form-group has-success motum-input-form">
                                <input [(ngModel)]="endData" type="date" class="form-control input-sm" id="inputBusinessName" [ngModelOptions]="{standalone: true}" required>
                              </div>
                            </div>
                          </div>
    
                          <div class="row motum-label-form">
                              <div class="col-sm-9">
                                <div class="has-success motum-input-form">
                                  <label for="inputCountry" >{{ operador | translate }}</label>
                                
                                  
                            <select [(ngModel)]="driverId" name="driverId" id="inputCountry" class="form-control input-sm" (change)="selectDriverData();">
                                <option selected="" value=""></option>  
                                <option [ngValue]="k.driverid" *ngFor="let k of arrDrivers">  
                                  {{k.name}} {{k.lastname}}  
                                </option>  
                             </select>
                            
                            
                            </div>
                              </div>
                            </div>
                          
                          <div class="row motum-label-form">
                              <div class="col-sm-9">
                                <div class="has-success motum-input-form">
                                  <label for="inputCountry" >{{ unidad | translate }}</label>
                                  
                                  <select [(ngModel)]="truckId" name="truckId" id="inputCountry" class="form-control input-sm" (change)="selectTruckData();">
                                    <option selected="" value=""></option>  
                                    <option [ngValue]="k.trucknumber" *ngFor="let k of arrTrucks">  
                                      {{k.trucknumber}}  
                                    </option>  
                                 </select>
                           
                                  
                                </div>
                              </div>
                            </div>
                            
                          <div class="row motum-label-form">
                            <div class="col-sm-9">
                              <div class="has-success motum-input-form">
                                <label for="inputCountry" >{{ remolque1 | translate }}</label>
                         
                                <select [(ngModel)]="trailer1Id" name="trailer1Id" id="inputCountry" class="form-control input-sm" (change)="selectTrailer1Data();">
                                  <option selected="" value=""></option>  
                                  <option [ngValue]="k.trailernumber" *ngFor="let k of arrTrailers">  
                                    {{k.trailernumber}}  
                                  </option>  
                               </select>
                         
                              
                                
                              </div>
                            </div>
                          </div>
    
                          <div class="row motum-label-form moreSpace">
                              <div class="col-sm-12">
                                <div class="has-success motum-input-form">
                                  <label for="inputState">{{ dolly | translate }}</label>
                                  <select [(ngModel)]="dollyId" name="dollyId" id="inputCountry" class="form-control input-sm" (change)="selectDollyData();">
                                    <option selected="" value=""></option>  
                                    <option [ngValue]="k.dollynumber" *ngFor="let k of arrDollys">  
                                      {{k.dollynumber}}  
                                    </option>  
                                 </select>
                           
                                  
                                </div>
                              </div>
                            </div>
      
                          
                          <div class="row motum-label-form moreSpace">
                            <div class="col-sm-12">
                              <div class="has-success motum-input-form">
                                <label for="inputState">{{ remolque2 | translate }}</label>

                                <select [(ngModel)]="trailer2Id" name="trailer2Id" id="inputCountry" class="form-control input-sm" (change)="selectTrailer2Data();">
                                  <option selected="" value=""></option>  
                                  <option [ngValue]="k.trailernumber" *ngFor="let k of arrTrailers">  
                                    {{k.trailernumber}}  
                                  </option>  
                               </select>
                         
                                
                              </div>
                            </div>
                          </div>
    
                        </div>
                        
                        
                        <hr class="motum-hr-separator"> 
    
    
                        <div class="col-md-5 col-sm-12 motum-content-right-form-interface">
                          <div class="window-left-margin">
    
                            <div class="row motum-label-form">
                              <div class="col-md-12">
                                <label for="inputColony">{{ beginDet | translate }}</label>
                              </div>
                              
                              <div class="col-md-12 col-sm-12">
                                
                                <label for="beginData">{{ beginData }}</label>
    
                              </div>
                            
                            
                            </div>
                            <div class="row motum-label-form">
                              <div class="col-md-12">
                                <label for="inputMunicipality">{{ endDet | translate }}</label>
                              </div>
                              <div class="col-md-12 col-sm-12">
                                  <label for="endData"> {{ endData }} </label>
    
    
                              </div>
                            </div>
                            <div class="row motum-label-form">
                              <div class="col-md-8  col-sm-12 spaceTelPadding">
                                <div class=" has-success motum-input-form motum-intl-tel-input">
                                  <label for="">{{ operadorDet | translate }}</label><br>
                                
                                </div>
                              </div>
                              <div class="col-md-4 col-sm-12">
                                <div class=" has-success motum-input-form">
                                  <label for="inputnumberExtension">{{ driverId }}</label><br>
                                  <label for="inputnumberExtension">{{ driverName }}</label><br>
                                  <label for="inputnumberExtension">{{ driverLicense }}</label><br>
                                
                                
                                </div>
                              </div>
                            </div>
    
                            <div class="row motum-label-form">
                                <div class="col-md-8  col-sm-12 spaceTelPadding">
                                  <div class=" has-success motum-input-form motum-intl-tel-input">
                                    <label for="">{{ unidadDet | translate }}</label><br>
                                  
                                  </div>
                                </div>
                                <div class="col-md-4 col-sm-12">
                                  <div class=" has-success motum-input-form">
                                  
                                   <div class=" has-success motum-input-form">
                                    <label for="inputnumberExtension">{{ truckBrand }}</label><br>
                                    <label for="inputnumberExtension">{{ truckModel }}</label><br>
                                    <label for="inputnumberExtension">{{ truckYear }}</label><br>
                                    <label for="inputnumberExtension">{{ truckPlate }}</label><br>
                                  
                                    
                                  </div>
                                  </div>
                                </div>
                              </div>
      
                              <div class="row motum-label-form space">
                                <div class="col-md-8  col-sm-12 spaceTelPadding">
                                  <div class="has-success motum-input-form motum-intl-tel-input">
                                    <label for="">{{ remolque1Det | translate }}</label><br>
                                  
                                   
                                </div>
                                </div>
      
                                <div class="col-sm-4 motum-label-form space">
                                  <div class="has-success motum-input-form">
                                   
                                    <div class=" has-success motum-input-form">
                                      <label for="inputnumberExtension">{{ trailer1Brand }}</label><br>
                                      <label for="inputnumberExtension">{{ trailer1Type }}</label><br>
                                      <label for="inputnumberExtension">{{ trailer1Model }}</label><br>
                                      <label for="inputnumberExtension">{{ trailer1Year }}</label><br>
                                      <label for="inputnumberExtension">{{ trailer1Plate }}</label><br>
                                    
                                     
                                    </div>
                                  </div>
                                </div>
                              </div>

                            <div class="row motum-label-form space">
                              <div class="col-md-8  col-sm-12 spaceTelPadding">
                                <div class="has-success motum-input-form motum-intl-tel-input">
                                  <label for="inputServer">{{ dollyDet | translate }}</label>
                                
                                 
                              </div>
                              </div>
    
                              <div class="col-sm-4 motum-label-form space">
                                <div class="has-success motum-input-form">
                                 
                                  <div class=" has-success motum-input-form">
                                    <label for="inputnumberExtension">{{ dollyBrand }}</label><br>
                                    <label for="inputnumberExtension">{{ dollyModel }}</label><br>
                                    <label for="inputnumberExtension">{{ dollyYear }}</label><br>
                               
                                   
                                  </div>
                                </div>
                              </div>
                            </div>
                            <div class="row motum-label-form space">
                              <div class="col-md-8">
                                <label for="inputSector">{{ remolque2Det | translate }}</label>
                              </div>
                              <div class="col-md-4 col-sm-12">
                                <div class=" has-success motum-input-form">
                                  <label for="inputnumberExtension">{{ trailer2Brand }}</label><br>
                                  <label for="inputnumberExtension">{{ trailer2Type }}</label><br>
                                  <label for="inputnumberExtension">{{ trailer2Model }}</label><br>
                                  <label for="inputnumberExtension">{{ trailer2Year }}</label><br>
                                  <label for="inputnumberExtension">{{ trailer2Plate }}</label><br>
                                
                                 
                                </div>
                              </div>
                            </div>
                            
                          </div>
                        </div>
                      </div>
                    </form>
                  </div>
                  <div class="section-footer">
                    <div class="row">
                      <div class="col-md-9 hidden-md-down">
                      </div>
                      <div class="col-md-1 col-sm-4">
                        <button type="button" routerLink="/pages/usersControl/clients-products" (click) ="toggle(true, null)" class="motum-btn-delete btn btn-primary window-btn-size motum-btn cancel">{{ cancel | translate}}</button>
                      </div>
                      <div class="col-md-1 col-sm-4">
                        <button type="button" class="btn btn-primary window-btn-size motum-btn next" (click)="t.select('tabFacturacion')">{{ next | translate}}</button>
                      </div>
                    </div>
                  </div>
                </div>
              </ng-template>
            </ngb-tab>

            
            <ngb-tab id="tabFacturacion" title="{{ ruta | translate }}">

                <ng-template ngbTabContent>
                  <div class="window-body">
                    <div class="section-head motum-margin-bottom-one">
                      <p class="section-title motum-title-form" *ngIf="editar">{{ editClientTrans | translate }}</p>
                      <p class="section-title motum-title-form" *ngIf="!editar">{{ createClientTrans | translate }}</p>
                      <hr class="window-section-space hrSectionHead">
      
                    </div>
                    <div class="section-body">


                        <div class="al-content">
  
                            <div class="widgets">
                              
                              <div class="row">
                                <div class="col-md-12"> 
                          <ba-card>
                        
                            <div class="row">
                              <div class="col-xl-4 col-lg-4 col-md-4 col-sm-12">
                                <div>
                                  
                                  <div class="checkboxUnits">
                                    <form class="row form-inline align-items-center">
                                      
                                      <div class="col-1 col-sm-1 onApClick">
                                        <i class="motum-i tm-e91b i-style table-tools-icons-margin" (click)="refresh()"></i>
                                      </div>
                                      <div class="col-1 col-sm-1 onApClick">
                                        <i class="motum-i tm-e91c" (click)='exportToExel();'></i>
                                      </div>
                                      <div class="form-group col-sm-1 col-1" [ngClass]="showCheckBox == false? 'invisible':''">
                                        <div class="checkbox custom-checkbox" style="margin-top: 4px;" >
                                          <ba-checkbox [(ngModel)]="isRemember"
                                                       [label]="' '"
                                                       (change)="makeSelectableRow()"
                                                       [ngModelOptions]="{standalone: true}">
                                          </ba-checkbox>
                                        </div>
                                      </div>
                                      <div class="btnShowModal animated fadeIn">
                                          <button *ngIf="isRemember==true" motum-button color="danger" isRectangle=true  (mouseenter) ="changeClassBtnStop='true'"
                                           (mouseleave)="changeClassBtnStop=''" (click)="openModalMotorStop('massive')">{{arrTranslate.motorStop}}</button>
                                       </div>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  </form>
                                  </div>
                                </div>
                              </div>
                              <div *ngIf="visibleTable == 'current'"class="col-xl-5 col-lg-5 col-md-5 .hidden-sm"></div>
                              <div *ngIf="visibleTable != 'current'"class="col-xl-3 col-lg-3 col-md-3 .hidden-sm"></div>
                              <div *ngIf="visibleTable != 'current'"class="col-xl-2 col-lg-2 col-md-2">
                                <div class="animated fadeIn calendar-btn-container" (click)="showCalendar()">
                                  <span class="calendar-lbl-container">{{calendarLabel}}</span>
                                  <i class="motum-i tm-e925"></i>
                              </div>
                              </div>

                              <div class="col-xl-3 col-lg-3 col-md-3 col-sm-12" style="margin-top: 3px;">
                                <motum-search-input
                                [styleInput]="'table'"
                                [placeholder]="'pages.userControl.client_user.busqueda' | translate"
                                [defaultWidthPercent]=100
                                (changesSearchValue)="onFilterChanged($event)">
                                </motum-search-input>
                              </div>
                            </div>

                            <div class="row">
                              <div class="col-lg-12 col-md-12 col-sm-12 " style="padding:0px!important;">
                                  <hr class="hrPatrimonialSecurity"/>
                                <ps-current-table *ngIf="visibleTable == 'current'"
                                 (statusCheckControl)=changeStatusControl($event)
                                 (statusIsRemember)=changeStatusRemember($event)
                                 (selectedOneItem)=getselectedOneItem($event)
                                 (selectedItems)=getselectedItems($event)
                                 (columnDefCurrent)= getColumnDef($event)
                                 (totalRows)=getTotalRows($event)
                                ></ps-current-table>
                          
                                <ps-log-table *ngIf="visibleTable != 'current'"
                                (statusCheckControl)=changeStatusControl($event)
                                (statusIsRemember)=changeStatusRemember($event)
                                (selectedOneItem)=getselectedOneItem($event)
                                (selectedItems)=getselectedItems($event)
                                (columnDefsLog)= getColumnDef($event)
                                (totalRows)=getTotalRows($event)
                               ></ps-log-table>
                              </div> 
                            </div>
                          </ba-card>
                                <div class="footer-table-counter">{{arrTranslateOfGeneral.recordsCount}}: {{totalRows}}  </div>
                          
                              </div>
                            </div>
                          </div>
                          
                          <motum-modal-date-picker *ngIf="showCalendarModal"
                                                   (selectedOption)="getSelectedOption($event)"
                                                   (hasBeenClosed)="modalClosed()"
                                                   (selectedRange)="getSelectedRange($event)"
                                                   (calendarLabel)="getCalendarLabel($event)"
                                                   [userDefinedOption]="selectedOption"
                                                   [userDefinedRange]="selectedRange">
                          
                          </motum-modal-date-picker>
                    <!--
                        <form (ngSubmit)="createClient()"  class="ng-untouched ng-pristine ng-valid">
                        <div class="row window-body-margin">
                          <div class="col-md-6 col-sm-12 motum-content-left-form">
                              <label class="window-bold-style motum-subtitle-form in-form">{{ rutaDef | translate}}</label>
                              <select [(ngModel)]="routeId" name="routeId" id="inputCountry" class="form-control input-sm" (change)="selectRouteData();">
                                <option selected="" value=""></option>  
                                <option [ngValue]="k.routeid" *ngFor="let k of arrRoutes">  
                                  {{k.placesource}} {{k.placetarget}}  
                                </option>
                              </select>
                              
                              <div class="row motum-label-form space">
                             
                                <div class="col-md-12 spaceTitle">
                                  <label for="inputFiscalComercialName">{{ origenDef | translate }}</label>
                                </div>
                               
                                <div class=" col-md-12 col-sm-12">
                                <div class="form-group has-success motum-input-form">
                                  <label class="window-bold-style motum-subtitle-form in-form">{{ routeSource }}</label>

                                   
                                </div>
                              </div>
                            </div>

                            <div class="row motum-label-form">
                              <div class="col-md-12">
                                <label for="inputFiscalBusinessName">{{ destinoDef | translate }}</label>
                              </div>
                              <div class=" col-md-12 col-sm-12">
                                <div class="form-group has-success motum-input-form">
                                  <label class="window-bold-style motum-subtitle-form in-form">{{ routeTarget }}</label>

                                </div>
                              </div>
                            </div>
                            
                            <div  class="row motum-label-form">
                              <div class="col-md-12">
                                <label for="inputFiscalRfc">{{ ubicacionesDef | translate }}</label>
                              </div>
                              

                            <div class="table-responsive table-style-motum">
                              <table class="table table-striped">
                                <thead class="thead-light">
                                  <tr class="m-0">
                                    <th class="w-20">Id</th>
                                    <th class="w-20">Lugar</th>
                                    <th class="w-45">Mensaje</th>
                                    <th class="w-10">Status</th>
                                 
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr *ngFor="let item of arrRouteDetail">
                                    <td>
                                      {{item.routeid}}
                                    </td>
                                    <td>
                                      {{item.placeid}}
                                    </td>
                                    <td>
                                      <div class="form-group has-success motum-input-form">
                                        <input [(ngModel)]="clientModel.rfc" type="text" value="Proxima parada, bajar velocidad"
                                          class="form-control input-sm" id="inputRfc" 
                                          [ngModelOptions]="{standalone: true}" required>
                                      </div>                                    
                                    </td>
                                    <td>
                                        <div class="form-group has-success motum-input-form">
                                            <input [(ngModel)]="clientModel.rfc" type="checkbox"
                                              class="form-control input-sm" id="inputRfc" 
                                              [ngModelOptions]="{standalone: true}" required>
                                          </div>
                                   >
                                    </td>
                                  </tr>

                                  
                                </tbody>
                              </table>
                            </div>
                            
      
                          </div> 
                          
                          <hr class="motum-hr-separator">
                       


                          <div class="col-md-5 col-sm-12 motum-content-right-form-interface">
                            <div class="window-left-margin">

                            </div>
                          </div>
      



                          </div>
                        </div>
                      </form>
                    -->
                    </div>
                    <div class="section-footer">
                      <div class="row">
                        <div class="col-md-8 hidden-md-down">
                        </div>
                        <div class="col-md-1 col-sm-4">
                          <button type="button" routerLink="/pages/usersControl/clients-products" (click) ="toggle(true, null)" class="motum-btn-delete btn btn-primary window-btn-size motum-btn cancel">{{ cancel | translate}}</button>
                        </div>
                        <div class="col-md-1 col-sm-4">
                          <button type="button" class="motum-btn-delete btn btn-primary window-btn-size  motum-btn" (click)="t.select('tabCliente')">{{ back | translate}}</button>
                        </div>
                        <div class="col-md-1 col-sm-4">
                          <button type="submit" class="btn btn-primary window-btn-size motum-btn next" (click)="t.select('tabCuenta')">{{ next | translate}}</button>
                        </div>
                      </div>
                  </div>
                </div>
              </div>
                </ng-template>
      
              </ngb-tab>

       






              <ngb-tab id="tabMapa" title="Mapa">

                  <ng-template ngbTabContent>
                    <div class="window-body">
                      <div class="section-head">
                        <p class="section-title motum-title-form" *ngIf="editar">{{ editClientTrans | translate }}</p>
                        <p class="section-title motum-title-form" *ngIf="!editar">{{ createClientTrans | translate }}</p>
                        <hr class="window-section-space motum-hr-head-form">
                      </div>
        
        
                      <div class="section-body">
                       

                          
                              <h1>{{ agmtitle }}</h1>

                              <!-- this creates a google map on the page with the given lat/lng from -->
                              <!-- the component as the initial center of the map: -->
                              <agm-map #map [latitude]="lat" [longitude]="lng">
                                <agm-marker [latitude]="lat" [longitude]="lng"></agm-marker>
                              </agm-map>
                          


































                      </div>
                      <div class="section-footer">
                        <div class="row">
                          <div class="col-md-9 hidden-md-down">
                          </div>
                          <div class="col-md-1 col-sm-4">
                            <button type="button" routerLink="/pages/usersControl/clients-products" (click) ="toggle(true, null)" class="motum-btn-delete btn btn-primary window-btn-size motum-btn cancel">{{ cancel | translate}}</button>
                          </div>
                          <div class="col-md-1 col-sm-4">
                            <button type="button" class="btn btn-primary window-btn-size motum-btn next" (click)="t.select('tabFacturacion')">{{ next | translate}}</button>
                          </div>
                        </div>
                      </div>


                    </div>
                  </ng-template>
                </ngb-tab>
    
      </ngb-tabset>
    </div>
  </div>
  </div>
</div>
